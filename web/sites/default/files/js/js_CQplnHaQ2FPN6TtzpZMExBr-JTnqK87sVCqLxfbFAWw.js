/* @license GPL-2.0-or-later https://www.drupal.org/licensing/faq */
(function($){"use strict";Drupal.behaviors.atFFOI={attach:function(){$('html').addClass('fa-loading');var fontObserver=new FontFaceObserver('FontAwesome');fontObserver.load('\uf287\uf142\uf0fc').then(function(){$('html').removeClass('fa-loading').addClass('fa-loaded');},function(){$('html').removeClass('fa-loading').addClass('fa-unavailable');});}};}(jQuery));;
(function($,Drupal,drupalSettings,storage){const currentUserID=parseInt(drupalSettings.user.uid,10);const secondsIn30Days=2592000;const thirtyDaysAgo=Math.round(new Date().getTime()/1000)-secondsIn30Days;let embeddedLastReadTimestamps=false;if(drupalSettings.history&&drupalSettings.history.lastReadTimestamps)embeddedLastReadTimestamps=drupalSettings.history.lastReadTimestamps;Drupal.history={fetchTimestamps(nodeIDs,callback){if(embeddedLastReadTimestamps){callback();return;}$.ajax({url:Drupal.url('history/get_node_read_timestamps'),type:'POST',data:{'node_ids[]':nodeIDs},dataType:'json',success(results){Object.keys(results||{}).forEach((nodeID)=>{storage.setItem(`Drupal.history.${currentUserID}.${nodeID}`,results[nodeID]);});callback();}});},getLastRead(nodeID){if(embeddedLastReadTimestamps&&embeddedLastReadTimestamps[nodeID])return parseInt(embeddedLastReadTimestamps[nodeID],10);return parseInt(storage.getItem(`Drupal.history.${currentUserID}.${nodeID}`)||0,10);},markAsRead(nodeID){$.ajax({url:Drupal.url(`history/${nodeID}/read`),type:'POST',dataType:'json',success(timestamp){if(embeddedLastReadTimestamps&&embeddedLastReadTimestamps[nodeID])return;storage.setItem(`Drupal.history.${currentUserID}.${nodeID}`,timestamp);}});},needsServerCheck(nodeID,contentTimestamp){if(contentTimestamp<thirtyDaysAgo)return false;if(embeddedLastReadTimestamps&&embeddedLastReadTimestamps[nodeID])return (contentTimestamp>parseInt(embeddedLastReadTimestamps[nodeID],10));const minLastReadTimestamp=parseInt(storage.getItem(`Drupal.history.${currentUserID}.${nodeID}`)||0,10);return contentTimestamp>minLastReadTimestamp;}};})(jQuery,Drupal,drupalSettings,window.localStorage);;
(function(window,Drupal,drupalSettings){window.addEventListener('load',()=>{if(drupalSettings.history&&drupalSettings.history.nodesToMarkAsRead)Object.keys(drupalSettings.history.nodesToMarkAsRead).forEach(Drupal.history.markAsRead);});})(window,Drupal,drupalSettings);;
(function($,Drupal,drupalSettings){const pathInfo=drupalSettings.path;const escapeAdminPath=sessionStorage.getItem('escapeAdminPath');const windowLocation=window.location;if(!pathInfo.currentPathIsAdmin&&!/destination=/.test(windowLocation.search))sessionStorage.setItem('escapeAdminPath',windowLocation);Drupal.behaviors.escapeAdmin={attach(){const toolbarEscape=once('escapeAdmin','[data-toolbar-escape-admin]');if(toolbarEscape.length&&pathInfo.currentPathIsAdmin&&escapeAdminPath!==null)$(toolbarEscape).attr('href',escapeAdminPath);}};})(jQuery,Drupal,drupalSettings);;
